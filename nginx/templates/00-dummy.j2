# THIS FILE IS MANAGED BY ANSIBLE, ALL CHANGES WILL BE LOST
#
server {
    listen          80 default_server;

    root            /var/www/html;

    # Load configuration files for the default server block.
    include         /etc/nginx/default.d/*.conf;

    location / {
        index       index.html index.htm;
    }

    location /nginx_status {
        stub_status     on;
        access_log      off;
        include         /etc/nginx/include.d/allow_status.conf;
        deny            all;
    }

    error_page 404 /404.html;
        location    = /40x.html {
    }

    error_page 500 502 503 504 /50x.html;
        location    = /50x.html {
    }
}

server {
    listen          443 default_server ssl;

    root            /var/www/html;

{% if ansible_fqdn is search(nginx_main_domain) %}
    ssl_certificate /etc/pki/tls/certs/{{ nginx_main_cert }};
    ssl_certificate_key /etc/pki/tls/private/{{ nginx_main_key }};
{% else %}
    ssl_certificate /etc/pki/tls/certs/{{ nginx_example_cert }};
    ssl_certificate_key /etc/pki/tls/private/{{ nginx_example_key }};
{% endif %}

    # Load configuration files for the default server block.
    include         /etc/nginx/default.d/*.conf;

    location / {
        index       index.html index.htm;
    }

    error_page 404 /404.html;
        location    = /40x.html {
    }

    error_page 500 502 503 504 /50x.html;
        location    = /50x.html {
    }
}
